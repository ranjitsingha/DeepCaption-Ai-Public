- name: Checkout repository
  uses: actions/checkout@v4
  with:
    token: ${{ secrets.GH_PAT }}
    submodules: recursive

- name: Authenticate Submodules
  run: |
    git submodule sync
    git submodule update --init --recursive --depth=1
  env:
    GIT_ASKPASS: echo
    GIT_TOKEN: ${{ secrets.GH_PAT }}
    GIT_CREDENTIALS: "https://x-access-token:${{ secrets.GH_PAT }}@github.com"